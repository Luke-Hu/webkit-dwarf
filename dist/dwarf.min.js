/*! webkit-dwarf Copyright(c) 2013 Daniel Yang <miniflycn@gmail.com> MIT Licensed */
!function(a){var b=document.getElementsByTagName("head")[0],c,d={},e,f,g=/\/\.\//g,h=/\/[^/]+\/\.\.\//,i=/([^:/])\/\//g,j=/^\.|\//,k=/(^https?|^file):\/\//;function l(a){return"function"==typeof a}function m(a,b){if(n(b))return b;if(o(b))return p(a,b)+".js";if(b=d[b])return b;throw new Error("url must not correct!")}function n(a){return/^https?:|^\/|.js$/.test(a)}function o(a){return 0===(a+"").indexOf(".")}function p(a,b){if(j.test(b)){b=a.substring(0,a.lastIndexOf("/")+1)+b,b=b.replace(g,"/");while(b.match(h))b=b.replace(h,"/");return b=b.replace(i,"$1/")}return b}var q=function(){var a={};return{get:function(b){return a[b]},set:function(b,c){return b in a?!1:(a[b]=c,!0)}}}(),r=function(){var a=[];return{push:function(){return a.push.apply(a,arguments)},make:function(b){a.forEach(function(a){var c=m(b,a.m),d=a.d,e=a.f;return t({base:b})(d,function(){var a=q.get(c);return a||(a=new s(c,!0),q.set(c,a)),!a.loaded&&a.set(e)})}),a.length=0}}}();function s(a,b){!b&&this.load(a),this.path=a,this.succList=[],this.failList=[]}s.prototype={constructor:s,load:function(a){var d=document.createElement("script"),f=this;d.addEventListener("load",g,!1),d.addEventListener("error",h,!1),d.type="text/javascript",d.async="async",d.src=a,b.appendChild(d);function g(){return i(),r.make(this.src)}function h(){return i(),b.removeChild(d),c&&!~a.indexOf(e)?f.load(a.replace(c,e)):f.down()}function i(){d.removeEventListener("load",g,!1),d.removeEventListener("error",h,!1)}},_unshift:function(a,b){return a.some(function(a){return a===b})?void 0:a.unshift(b)},succ:function(a){return this._unshift(this.succList,a)},fail:function(a){return this._unshift(this.failList,a)},done:function(){this.loaded=!0,this.succList.forEach(function(a){return a()})},down:function(){this.failList.forEach(function(a){return a()})},require:function(){if(this.factory){var a={exports:{}};return this.factory(t({base:this.path}),a.exports,a),this.exports=a.exports,this.require=function(){return this.exports},this.require()}return new Error("script has not loaded.")},set:function(a){return this.factory=a,this.done()}};function t(a){var b=a.base;function c(a,c,d){var e;if(!c){var f=m(b,a),g=q.get(f);if(g.loaded)return g.require();throw new Error("script has not loaded.")}function h(){var f=[];a.forEach(function(a,c){var e=m(b,a),g=q.get(e);g||(g=new s(e),q.set(e,g)),g.loaded||(f.push(a),g.succ(h),d&&g.fail(d))}),a=f,a.length||e||(e=!0,c())}h()}return c}function u(a,b,c){if(!c){if(l(b))c=b;else{var d=b;c=function(a,b,c){return c.exports=d}}b=[]}r.push({m:a,d:b,f:c})}function v(a){c=void 0===a.base?c:a.base,d=a.path||d}var w=a.require=function(){return f?f.apply(a,arguments):(r.make(c||location.href),c?(f=t({base:c}),e=location.href):f=t({base:location.href}),f.apply(a,arguments))};w.opt=v,w.makeRequire=t,a.define=u}(window);
//# sourceMappingURL=dwarf.min.map