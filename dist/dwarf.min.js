/*! webkit-dwarf Copyright(c) 2013 Daniel Yang <miniflycn@gmail.com> MIT Licensed */
!function(a){var b=document.getElementsByTagName("head")[0],c,d,e,f=/\/\.\//g,g=/\/[^/]+\/\.\.\//,h=/([^:/])\/\//g;function i(a){return"function"==typeof a}function j(a,b){return k(b)?b:l(b)?m(a,b)+".js":void 0}function k(a){return/^https?:|^\/|.js$/.test(a)}function l(a){return 0===(a+"").indexOf(".")}function m(a,b){b=a.substring(0,a.lastIndexOf("/")+1)+b,b=b.replace(f,"/");while(b.match(g))b=b.replace(g,"/");return b=b.replace(h,"$1/")}var n=function(){var a={};return{get:function(b){return a[b]},set:function(b,c){return b in a?!1:(a[b]=c,!0)}}}(),o=function(){var a=[];return{push:function(){return a.push.apply(a,arguments)},make:function(b){a.forEach(function(a){var c=j(b,a.m),d=a.d,e=a.f;return q({base:b})(d,function(){var a=n.get(c);return a||(a=new p(c,!0),n.set(c,a)),!a.loaded&&a.set(e)})}),a.length=0}}}();function p(a,b){!b&&this.load(a),this.path=a,this.succList=[],this.failList=[]}p.prototype={constructor:p,load:function(a){var e=document.createElement("script"),f=this;e.addEventListener("load",g,!1),e.addEventListener("error",h,!1),e.type="text/javascript",e.async="async",e.src=a,b.appendChild(e);function g(){return i(),o.make(this.src)}function h(){return i(),b.removeChild(e),c&&!~a.indexOf(d)?f.load(a.replace(c,d)):f.down()}function i(){e.removeEventListener("load",g,!1),e.removeEventListener("error",h,!1)}},_unshift:function(a,b){return a.some(function(a){return a===b})?void 0:a.unshift(b)},succ:function(a){return this._unshift(this.succList,a)},fail:function(a){return this._unshift(this.failList,a)},done:function(){this.loaded=!0,this.succList.forEach(function(a){return a()})},down:function(){this.failList.forEach(function(a){return a()})},require:function(){if(this.factory){var a={exports:{}};return this.factory(q({base:this.path}),a.exports,a),this.exports=a.exports,this.require=function(){return this.exports},this.require()}return new Error("script has not loaded.")},set:function(a){return this.factory=a,this.done()}};function q(a){var b=a.base;function c(a,c,d){var e;if(!c){var f=j(b,a),g=n.get(f);if(g.loaded)return g.require();throw new Error("script has not loaded.")}function h(){var f=[];a.forEach(function(a,c){var e=j(b,a),g=n.get(e);g||(g=new p(e),n.set(e,g)),g.loaded||(f.push(a),g.succ(h),d&&g.fail(d))}),a=f,a.length||e||(e=!0,c())}h()}return c}function r(a,b,c){if(!c){if(i(b))c=b;else{var d=b;c=function(a,b,c){return c.exports=d}}b=[]}o.push({m:a,d:b,f:c})}function s(a){c=void 0===a.base?c:a.base}var t=a.require=function(){return e?e.apply(a,arguments):(o.make(c||location.href),c?(e=q({base:c}),d=location.href):e=q({base:location.href}),e.apply(a,arguments))};t.opt=s,t.makeRequire=q,a.define=r}(window);
//# sourceMappingURL=dwarf.min.map